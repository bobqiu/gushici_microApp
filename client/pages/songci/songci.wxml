<!--pages/songci/songci.wxml-->
<view class='songci container'>
  <view data-q='{{songciItem.work_title}}' data-id_='{{songciItem.id}}' class='title myclick' bindtap='search_'>
    {{songciItem.work_title}}
    <image wx:if="{{songciItem.audio_id!=0}}" src='../../static/sound.png' style='width:1.4em;height:1.4em;vertical-align:-0.3em;' data-q='{{songciItem.work_title}}' data-id_='{{songciItem.id}}'></image>
  </view>
  <view wx:if="{{songciItem.work_dynasty}}" class='myclick author' data-q='{{songciItem.work_author}}' data-id_='{{songciItem.id}}' bindtap='search_'>
    [{{songciItem.work_dynasty}}] {{songciItem.work_author}}
  </view>
  <view wx:if="{{songciItem.foreword}}" style='margin-left:72rpx;margin-top:-10px;font-style:italic;'>
    <text selectable='true' decode="true" space="true">
    {{songciItem.foreword}}
    </text>
  </view>
  <view class='content {{songciItem.layout}}'>
    <text selectable='true' decode="true" space="true">{{songciItem.content}}</text>
  </view>
  <view style='display:flex;flex-direction:row;height:30x;margin-top:10px;' wx:if="{{songciItem.audio_id!=0}}">
    <view style='flex:40;text-align:right;'>
      <navigator url='/pages/catalog/catalog?q=音频' style='display:inline-block;'>
        <image src='../../static/list.png' class="operate_music" style='margin-right:15px;'></image>
      </navigator>
      <navigator url='/pages/catalog/catalog' style='display:inline-block;'>
        <image src='../../static/search.png' class="operate_music" style='margin-right:15px;'></image>
      </navigator>
      <image src='../../static/up_music.png' class="operate_music" bindtap='operate_play' data-key='up'></image>
    </view>
    <view style='flex:20;text-align:center;'>
      <image src='../../static/{{playing ? "pause" : "play_music"}}.png' style='width:30px;height:30px;' bindtap='playbackmusic'></image>
    </view>
    <view style='flex:45;text-align:left;position:relative;'>
      <image src='../../static/next_music.png' class="operate_music" bindtap='operate_play' data-key='next'></image>
      <image src='../../static/{{mode}}.png' class="operate_music" bindtap='change_mode' style='margin-left:15px;'></image>
      <image src='../../static/timed.png' class="operate_music" bindtap='setTimed' style='margin-left:15px;'>
      </image>
      <text wx:if="{{time2close!=0}}" style='text-align:center;line-height:2em;display:inline-block;width:2em;height:2em;border-radius:1em;font-size:9px;color:white;background-color:#BB7E7E;opacity:0.8;position:absolute;top:0px;margin-left:-8px;'>{{closeplaytime}}</text>
    </view>
  </view>
  <view wx:if="{{playing}}">
    <slider bindchanging="sliderChanging" bindchange="slider2change" step="1" min="1" block-size="13" value='{{slideValue}}' block-color="#BB7E7E" style='margin-top:0;' />
    <text style='font-size:10px;color:#BB7E7E;opacity:0.8;float:right;margin-right:10px;margin-top:-25rpx;' wx:if="{{duration_show}}">{{duration_show}}</text>
    <text style='font-size:10px;color:#BB7E7E;opacity:0.8;float:left;margin-top:-25rpx;margin-left:10px;' wx:if="{{current_time_show}}">{{current_time_show}}</text>
  </view>
  <view class='tabs'>
    <view wx:if="{{songciItem.intro}}" bindtap='changeContent' data-item='0' class='tab-item {{currentTab==0?"active":""}}'>评析</view>
    <view wx:if="{{songciItem.annotation}}" bindtap='changeContent' data-item='1' class='tab-item {{currentTab==1?"active":""}}'>注释</view>
    <view wx:if="{{songciItem.translation}}" bindtap='changeContent' data-item='2' class='tab-item {{currentTab==2?"active":""}}'>译文</view>
    <view wx:if="{{songciItem.appreciation}}" bindtap='changeContent' data-item='3' class='tab-item {{currentTab==3?"active":""}}'>赏析</view>
    <view wx:if="{{songciItem.master_comment}}" bindtap='changeContent' data-item='4' class='tab-item {{currentTab==4?"active":""}}'>辑评</view>
    <view bindtap="operate_like" class='tab-item' data-like='{{songciItem.like}}'>
      <image src='{{songciItem.like==1 ? "../../static/liked.png":"../../static/like.png"}}' style='width:1.2em;height:1.2em;' data-like='{{songciItem.like}}'></image>
    </view>
    <view class='translation' style='{{(currentTab==4)||(currentTab==1)?"text-indent:2em;":""}}' bindlongpress='{{(currentTab==2||currentTab==1||currentTab==0)?"longPress":"longPressBack" }}'>
      <text decode='true' space='true'>{{show_content}}</text>
    </view>
  </view>
</view>